<!DOCTYPE html>
<html lang="en">

<!--引用静态文件 -->
{% load staticfiles %}
<script src="{% static 'js/jquery-3.2.1.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/public.js' %}" type="text/javascript"></script>
<script src="{% static 'js/bootstrap.js' %}" type="text/javascript"></script>

<link href="{% static 'css/public.css' %}" rel="stylesheet">
<link href="{% static 'css/bootstrap.css' %}" rel="stylesheet">

<head>
    <meta charset="UTF-8">
    <title>用户添加</title>
</head>

<body>

<div id="addUserName" style="width:50%; float:left">
    <div class="form-group">
        <label>用户名</label>
        <input type="text" class="form-control" id="userNameInput" placeholder="输入用户名">
        <!--<small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>_-->
    </div>
</div>
<div id="addUserPwd" style="width:50%; float:left">
    <div class="form-group">
        <label>密码</label>
        <input type="email" class="form-control" id="userPasswordInput" placeholder="输入密码">
        <!--<small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>_-->
    </div>
</div>
 <button id="createUser" type="submit" class="btn btn-primary">Submit</button>

<div style="margin-top: 1rem">
    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">用户名</th>
                <th scope="col">密码</th>
                <th scope="col">员工工号</th>
            </tr>
        </thead>
    </table>
</div>

<script type="text/javascript">
    $(function() {

        //初始化页面
        init();
    });

    function init() {
        //绑定确定按钮
        $("#createUser").click(function() {
            var userName = $("#userNameInput").val();
            var userPassword = $("#userPasswordInput").val();
            var userEmail = '';
            createUser(userName, userPassword, userEmail);
        });
    }

    /***** 债券走势图 *****/
    /*****
     * userName 用户名
     * userPassword 用户密码
     * userEmail 用户邮箱
     *
     * */
    function createUser(userName, userPwd, userEmail){
        var url = '/userAuth/login/createUser';

        $.ajax({
            type: 'POST',
            data:{
                'userName':userName,
                'userPassword':userPwd,
                'userEmail':userEmail
            },
            dataType: 'json',
            url: url,
            success: successInfo,
            error: errorInfo,
            //采用异步
            async: true
        });
    }

    //返回成功，并且初始化表格
    var initUserGrid = function (data) {
        alert('创建用户成功');

        //初始化表格
        var url = '/userAuth/login/getUserData';

        $.ajax({
            type: 'POST',
            data:{
            },
            dataType: 'json',
            url: url,
            success: function () {
            },
            error: errorInfo,
            //采用异步
            async: true
        });
        //console.log(msg);
        //关闭进度条
        //$('body').mLoading("hide");
    };

    //错误信息处理界面
    var errorInfo = function (msg) {
        alert('创建用户失败');
        console.log(msg);
        //关闭进度条
        //$('body').mLoading("hide");
    };

</script>

</body>
</html>